$ Define the grid
MESH       GRID.FAC=0.1 DX.MAX=0.006 DX.MIN=0.0005 LY.SURF=0.01 LY.ACTIV=0.03 LY.BOT=0.04 

$ Read the mask definition file
MASK       IN.FILE=fabrication.tl1 

$ Initialize the structure
INITIALIZE <100>  BORON=1E16

$ N-well

DEPOSIT    PHOTORESIST  POSITIVE  THICKNESS=2
EXPOSE     MASK=Nwell
DEVELOP

IMPLANT    PHOSPHORUS    DOSE=8E11  ENERGY=10
ETCH       PHOTORESIST  ALL    

$ Pmos-Channel Stage 1

DEPOSIT    PHOTORESIST  POSITIVE  THICKNESS=2
EXPOSE     MASK=PGate
DEVELOP

IMPLANT    PHOSPHORUS    DOSE=3E14  ENERGY=16
ETCH       PHOTORESIST  ALL   

$ Pmos-Channel Stage 2

DEPOSIT    OXIDE  THICKNESS=0.013
DEPOSIT    PHOTORESIST  POSITIVE  THICKNESS=2
EXPOSE     MASK=PGate
DEVELOP
  
IMPLANT    PHOSPHORUS    DOSE=1.7E14  ENERGY=11  
ETCH       PHOTORESIST  ALL      
ETCH       OXIDE    OLD.DRY    THICKNESS=0.013

$ Nmos-Channel Stage 1

DEPOSIT    PHOTORESIST  POSITIVE  THICKNESS=2
EXPOSE     MASK=NGate
DEVELOP

IMPLANT    Boron         DOSE=1E14  ENERGY=12
ETCH       PHOTORESIST  ALL   

$ Nmos-Channel Stage 2

DEPOSIT    OXIDE  THICKNESS=0.03
DEPOSIT    PHOTORESIST  POSITIVE  THICKNESS=2
EXPOSE     MASK=NGate
DEVELOP
  
IMPLANT    BORON    DOSE=2E14  ENERGY=10  
ETCH       PHOTORESIST  ALL      
ETCH       OXIDE    OLD.DRY    THICKNESS=0.03

$ Pmos source/drain Doping

DEPOSIT    OXIDE  THICKNESS=0.015
DEPOSIT    PHOTORESIST  NEGATIVE  THICKNESS=2
EXPOSE     MASK=PSource
DEVELOP

IMPLANT    Boron    DOSE=1E15  ENERGY=10
ETCH       PHOTORESIST  ALL 
ETCH       OXIDE    OLD.DRY    THICKNESS=0.015

$ Nmos source/drain Doping

DEPOSIT    PHOTORESIST  NEGATIVE  THICKNESS=2
EXPOSE     MASK=NSource
DEVELOP

IMPLANT    ARSENIC    DOSE=3E14  ENERGY=10
ETCH       PHOTORESIST  ALL 

$ Save structure
savefile out.f=fabrication.tif tif
$SELECT Z=BORON
$PRINT.1D X.value=0.1 OUT.FILE=pmos_channel_doping.txt
